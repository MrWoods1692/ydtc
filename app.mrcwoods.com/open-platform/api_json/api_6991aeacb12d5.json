{
    "name": "图片无损压缩",
    "brief": "用极低的损耗换取更小的体积",
    "request_desc": "",
    "api_url": "https://api.mrcwoods.com/v1/tpwsys/",
    "request_method": "GET",
    "return_format": "IMAGE",
    "request_example": "https://api.mrcwoods.com/v1/tpwsys/?image=图片链接&zip=auto",
    "request_params": [
        {
            "name": "image",
            "type": "image",
            "required": "是",
            "desc": "需要压缩的图片链接(支持PNG、JPG、WEBP、GIF、BMP、TIFF、AVIF、SVG 和动画GIF)"
        },
        {
            "name": "zip",
            "type": "number",
            "required": "否",
            "desc": "图片压缩比例，支持1-100和auto(自动)，百分比越小压缩程度越高，百分比越高图片质量越好"
        }
    ],
    "return_params": [
        {
            "field": "无",
            "type": "无",
            "desc": "无"
        }
    ],
    "status_code": [
        {
            "code": "200",
            "desc": "请求成功"
        }
    ],
    "return_example": "无",
    "sdk": {
        "PHP": "&lt;?php\r\n\r\n/**\r\n * 图片无损压缩API\r\n * 用极低的损耗换取更小的体积\r\n */\r\n\r\n// 必填参数\r\n$imageUrl = &apos;https://example.com/path/to/your/image.jpg&apos;; // 需要压缩的图片链接\r\n\r\n// 可选参数，根据需要取消注释并设置值\r\n// $zip = 50; // 图片压缩比例，支持1-100和auto(自动)\r\n\r\n// 请求URL\r\n$requestUrl = &apos;https://api.mrcwoods.com/v1/tpwsys/&apos;;\r\n\r\n// 初始化cURL会话\r\n$ch = curl_init();\r\n\r\n// 设置cURL选项\r\ncurl_setopt($ch, CURLOPT_URL, $requestUrl);\r\ncurl_setopt($ch, CURLOPT_POST, true);\r\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\r\n\r\n// 构建POST数据\r\n$postData = [\r\n    &apos;image&apos; =&gt; $imageUrl\r\n];\r\n\r\n// 如果设置了可选参数，添加到POST数据中\r\nif (isset($zip)) {\r\n    $postData[&apos;zip&apos;] = $zip;\r\n}\r\n\r\ncurl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($postData));\r\n\r\n// 执行cURL请求\r\n$response = curl_exec($ch);\r\n\r\n// 检查cURL错误\r\nif ($response === false) {\r\n    $errorMessage = curl_error($ch);\r\n    curl_close($ch);\r\n    die(&quot;cURL请求失败: &quot; . $errorMessage);\r\n}\r\n\r\n// 关闭cURL会话\r\ncurl_close($ch);\r\n\r\n// 获取HTTP响应码\r\n$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\r\n\r\n// 检查HTTP响应码\r\nif ($httpCode !== 200) {\r\n    die(&quot;API请求失败，HTTP状态码: &quot; . $httpCode);\r\n}\r\n\r\n// 保存压缩后的图片\r\n$outputFile = &apos;compressed_image.jpg&apos;;\r\n$fileHandle = fopen($outputFile, &apos;wb&apos;);\r\n\r\nif ($fileHandle === false) {\r\n    die(&quot;无法打开文件以写入压缩后的图片&quot;);\r\n}\r\n\r\nif (fwrite($fileHandle, $response) === false) {\r\n    fclose($fileHandle);\r\n    die(&quot;写入压缩后的图片失败&quot;);\r\n}\r\n\r\nfclose($fileHandle);\r\n\r\necho &quot;图片压缩成功，保存为: &quot; . $outputFile;\r\n\r\n?&gt;"
    }
}