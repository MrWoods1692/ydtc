{
    "name": "图片色彩提取",
    "brief": "算法识别返回各类编码百分比",
    "request_desc": "前往https://yunzhiapi.cn/ 登录获取用户密钥token",
    "api_url": "https://yunzhiapi.cn/API/tpsctq.php",
    "request_method": "GET",
    "return_format": "JSON",
    "request_example": "https://yunzhiapi.cn/API/tpsctq.php?url=图片链接",
    "request_params": [
        {
            "name": "token",
            "type": "string",
            "required": "是",
            "desc": "登录获取用户密钥"
        },
        {
            "name": "url",
            "type": "url",
            "required": "是",
            "desc": "需要识别色彩的图片链接"
        },
        {
            "name": "limit",
            "type": "number",
            "required": "可选",
            "desc": "色彩获取数量，支持1-30，不填写默认返回前5个(按照占用百分比排列)"
        }
    ],
    "return_params": [
        {
            "field": "color_name_cn",
            "type": "string",
            "desc": "颜色中文"
        },
        {
            "field": "color_name_en",
            "type": "string",
            "desc": "颜色英文"
        },
        {
            "field": "rgb",
            "type": "string",
            "desc": "RGB图片编码"
        },
        {
            "field": "rgba",
            "type": "string",
            "desc": "RGBA图片编码"
        },
        {
            "field": "hex",
            "type": "string",
            "desc": "十六进制图片编码"
        },
        {
            "field": "hsl",
            "type": "string",
            "desc": "HSI图片编码"
        },
        {
            "field": "hsla",
            "type": "string",
            "desc": "HSIA图片编码"
        },
        {
            "field": "percentage",
            "type": "string",
            "desc": "颜色占比"
        }
    ],
    "status_code": [
        {
            "code": "200",
            "desc": "请求成功"
        },
        {
            "code": "403",
            "desc": "请求失败"
        },
        {
            "code": "404",
            "desc": "文件缺失"
        },
        {
            "code": "500",
            "desc": "请求超时"
        }
    ],
    "return_example": "{\r\n    \"success\": true,\r\n    \"info\": {\r\n        \"original_size\": \"4441x6213\",\r\n        \"processed_size\": \"143x200\",\r\n        \"colors_found\": 5\r\n    },\r\n    \"colors\": [\r\n        {\r\n            \"color_name_cn\": \"银灰\",\r\n            \"color_name_en\": \"Silver Gray\",\r\n            \"rgb\": \"rgb(171, 175, 183)\",\r\n            \"rgba\": \"rgba(171, 175, 183, 1)\",\r\n            \"hex\": \"#ABAFB7\",\r\n            \"hsl\": \"hsl(220, 8%, 69%)\",\r\n            \"hsla\": \"hsla(220, 8%, 69%, 1)\",\r\n            \"cmyk\": \"cmyk(7%, 4%, 0%, 28%)\",\r\n            \"percentage\": \"7.26%\"\r\n        },\r\n        {\r\n            \"color_name_cn\": \"香槟色\",\r\n            \"color_name_en\": \"Champagne\",\r\n            \"rgb\": \"rgb(255, 237, 221)\",\r\n            \"rgba\": \"rgba(255, 237, 221, 1)\",\r\n            \"hex\": \"#FFEDDD\",\r\n            \"hsl\": \"hsl(28, 100%, 93%)\",\r\n            \"hsla\": \"hsla(28, 100%, 93%, 1)\",\r\n            \"cmyk\": \"cmyk(0%, 7%, 13%, 0%)\",\r\n            \"percentage\": \"4.34%\"\r\n        },\r\n        {\r\n            \"color_name_cn\": \"天蓝\",\r\n            \"color_name_en\": \"Sky Blue\",\r\n            \"rgb\": \"rgb(122, 184, 248)\",\r\n            \"rgba\": \"rgba(122, 184, 248, 1)\",\r\n            \"hex\": \"#7AB8F8\",\r\n            \"hsl\": \"hsl(210, 90%, 73%)\",\r\n            \"hsla\": \"hsla(210, 90%, 73%, 1)\",\r\n            \"cmyk\": \"cmyk(51%, 26%, 0%, 3%)\",\r\n            \"percentage\": \"3.37%\"\r\n        },\r\n        {\r\n            \"color_name_cn\": \"矢车菊蓝\",\r\n            \"color_name_en\": \"Cornflower Blue\",\r\n            \"rgb\": \"rgb(80, 156, 233)\",\r\n            \"rgba\": \"rgba(80, 156, 233, 1)\",\r\n            \"hex\": \"#509CE9\",\r\n            \"hsl\": \"hsl(210, 78%, 61%)\",\r\n            \"hsla\": \"hsla(210, 78%, 61%, 1)\",\r\n            \"cmyk\": \"cmyk(66%, 33%, 0%, 9%)\",\r\n            \"percentage\": \"3.25%\"\r\n        },\r\n        {\r\n            \"color_name_cn\": \"桃粉\",\r\n            \"color_name_en\": \"Peach Puff\",\r\n            \"rgb\": \"rgb(249, 218, 205)\",\r\n            \"rgba\": \"rgba(249, 218, 205, 1)\",\r\n            \"hex\": \"#F9DACD\",\r\n            \"hsl\": \"hsl(18, 79%, 89%)\",\r\n            \"hsla\": \"hsla(18, 79%, 89%, 1)\",\r\n            \"cmyk\": \"cmyk(0%, 12%, 18%, 2%)\",\r\n            \"percentage\": \"2.64%\"\r\n        }\r\n    ]\r\n}",
    "sdk": {
        "PHP": "&lt;?php\r\n\r\n/**\r\n * 图片色彩提取API调用函数\r\n *\r\n * @param string $token 登录获取的用户密钥\r\n * @param string $url 需要识别色彩的图片链接\r\n * @return array API响应数据\r\n */\r\nfunction getImageColorExtraction($token, $url) {\r\n    // 必填参数\r\n    $params = [\r\n        &apos;token&apos; =&gt; $token,\r\n        &apos;url&apos; =&gt; $url\r\n    ];\r\n\r\n    // 可选参数，用户可根据需要取消注释并设置\r\n    // $params[&apos;limit&apos;] = 10; // 色彩获取数量，支持1-30，不填写默认返回前5个\r\n\r\n    // API请求URL\r\n    $requestUrl = &quot;https://yunzhiapi.cn/API/tpsctq.php&quot;;\r\n\r\n    // 初始化cURL会话\r\n    $ch = curl_init();\r\n\r\n    // 设置cURL选项\r\n    curl_setopt($ch, CURLOPT_URL, $requestUrl);\r\n    curl_setopt($ch, CURLOPT_POST, true);\r\n    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($params));\r\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\r\n    curl_setopt($ch, CURLOPT_HTTPHEADER, [\r\n        &apos;Content-Type: application/x-www-form-urlencoded&apos;\r\n    ]);\r\n\r\n    // 执行cURL请求\r\n    $response = curl_exec($ch);\r\n\r\n    // 检查cURL错误\r\n    if (curl_errno($ch)) {\r\n        $error_msg = curl_error($ch);\r\n        curl_close($ch);\r\n        throw new Exception(&quot;cURL请求错误: &quot; . $error_msg);\r\n    }\r\n\r\n    // 关闭cURL会话\r\n    curl_close($ch);\r\n\r\n    // 解析JSON响应\r\n    $responseData = json_decode($response, true);\r\n\r\n    // 检查JSON解析错误\r\n    if (json_last_error() !== JSON_ERROR_NONE) {\r\n        throw new Exception(&quot;JSON解析错误: &quot; . json_last_error_msg());\r\n    }\r\n\r\n    // 返回API响应数据\r\n    return $responseData;\r\n}\r\n\r\n// 示例调用\r\ntry {\r\n    $token = &quot;your_token_here&quot;; // 替换为实际的token\r\n    $url = &quot;https://example.com/image.jpg&quot;; // 替换为实际的图片链接\r\n    $result = getImageColorExtraction($token, $url);\r\n    print_r($result);\r\n} catch (Exception $e) {\r\n    echo &quot;错误: &quot; . $e-&gt;getMessage();\r\n}\r\n\r\n?&gt;",
        "Java": "import java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.net.URLEncoder;\r\nimport java.nio.charset.StandardCharsets;\r\n\r\npublic class ImageColorExtractionAPI {\r\n\r\n    // 必填参数\r\n    private static final String TOKEN = &quot;your_token_here&quot;; // 登录获取用户密钥\r\n    private static final String IMAGE_URL = &quot;your_image_url_here&quot;; // 需要识别色彩的图片链接\r\n\r\n    // 可选参数，根据需要取消注释并设置值\r\n    // private static final int LIMIT = 10; // 色彩获取数量，支持1-30，不填写默认返回前5个\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            // 构建API请求URL\r\n            StringBuilder requestUrl = new StringBuilder(&quot;https://yunzhiapi.cn/API/tpsctq.php?token=&quot;)\r\n                    .append(URLEncoder.encode(TOKEN, StandardCharsets.UTF_8))\r\n                    .append(&quot;&amp;url=&quot;).append(URLEncoder.encode(IMAGE_URL, StandardCharsets.UTF_8));\r\n\r\n            // 如果使用可选参数，添加到URL中\r\n            // if (LIMIT &gt;= 1 &amp;&amp; LIMIT &lt;= 30) {\r\n            //     requestUrl.append(&quot;&amp;limit=&quot;).append(LIMIT);\r\n            // }\r\n\r\n            // 发送HTTP GET请求\r\n            URL url = new URL(requestUrl.toString());\r\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n            connection.setRequestMethod(&quot;GET&quot;);\r\n\r\n            // 获取响应码\r\n            int responseCode = connection.getResponseCode();\r\n            if (responseCode == HttpURLConnection.HTTP_OK) {\r\n                // 读取响应内容\r\n                BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n                String inputLine;\r\n                StringBuilder response = new StringBuilder();\r\n\r\n                while ((inputLine = in.readLine()) != null) {\r\n                    response.append(inputLine);\r\n                }\r\n                in.close();\r\n\r\n                // 打印响应内容\r\n                System.out.println(&quot;API Response: &quot; + response.toString());\r\n            } else {\r\n                // 处理错误响应\r\n                System.err.println(&quot;Error: Unable to fetch data from API. HTTP Response Code: &quot; + responseCode);\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            // 捕获并处理异常\r\n            System.err.println(&quot;Error: An exception occurred while making the API request.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}",
        "Python": "import requests\r\n\r\ndef extract_image_colors(token, url, limit=None):\r\n    &quot;&quot;&quot;\r\n    调用图片色彩提取API，返回图片中的色彩编码百分比。\r\n\r\n    :param token: 登录获取的用户密钥\r\n    :param url: 需要识别色彩的图片链接\r\n    :param limit: 色彩获取数量，支持1-30，不填写默认返回前5个\r\n    :return: API响应数据\r\n    &quot;&quot;&quot;\r\n    # 必填参数\r\n    params = {\r\n        &apos;token&apos;: token,\r\n        &apos;url&apos;: url\r\n    }\r\n    \r\n    # 可选参数，根据需要取消注释\r\n    # params[&apos;limit&apos;] = limit\r\n\r\n    # 请求URL\r\n    request_url = &quot;https://yunzhiapi.cn/API/tpsctq.php&quot;\r\n    \r\n    try:\r\n        # 发送GET请求\r\n        response = requests.get(request_url, params=params)\r\n        # 检查响应状态码\r\n        response.raise_for_status()\r\n        \r\n        # 返回JSON格式的响应数据\r\n        return response.json()\r\n    except requests.exceptions.HTTPError as http_err:\r\n        print(f&quot;HTTP error occurred: {http_err}&quot;)  # HTTP错误处理\r\n    except requests.exceptions.ConnectionError as conn_err:\r\n        print(f&quot;Connection error occurred: {conn_err}&quot;)  # 连接错误处理\r\n    except requests.exceptions.Timeout as timeout_err:\r\n        print(f&quot;Timeout error occurred: {timeout_err}&quot;)  # 超时错误处理\r\n    except requests.exceptions.RequestException as req_err:\r\n        print(f&quot;An error occurred: {req_err}&quot;)  # 其他请求错误处理\r\n    except ValueError as json_err:\r\n        print(f&quot;JSON decode error: {json_err}&quot;)  # JSON解析错误处理\r\n\r\n# 示例调用\r\n# result = extract_image_colors(&apos;your_token_here&apos;, &apos;http://example.com/image.jpg&apos;, limit=10)\r\n# print(result)",
        "JavaScript": "/**\r\n * 图片色彩提取API调用函数\r\n * @param {string} token - 登录获取用户密钥\r\n * @param {string} url - 需要识别色彩的图片链接\r\n * @param {number} [limit] - 色彩获取数量，支持1-30，不填写默认返回前5个(按照占用百分比排列)\r\n * @returns {Promise} - 返回一个Promise对象，解析为API响应数据\r\n */\r\nasync function fetchImageColorExtraction(token, url, limit) {\r\n    // 检查必填参数是否为空\r\n    if (!token) {\r\n        throw new Error(&quot;必填参数 &apos;token&apos; 不能为空&quot;);\r\n    }\r\n    if (!url) {\r\n        throw new Error(&quot;必填参数 &apos;url&apos; 不能为空&quot;);\r\n    }\r\n\r\n    // 构建请求参数对象\r\n    const params = {\r\n        token: token,\r\n        url: url\r\n        // limit: limit // 可选参数，根据需要取消注释并设置值\r\n    };\r\n\r\n    // 如果提供了limit参数，则添加到请求参数中\r\n    if (limit !== undefined) {\r\n        params.limit = limit;\r\n    }\r\n\r\n    // 构建请求URL\r\n    const requestUrl = new URL(&quot;https://yunzhiapi.cn/API/tpsctq.php&quot;);\r\n    requestUrl.search = new URLSearchParams(params).toString();\r\n\r\n    try {\r\n        // 发送GET请求\r\n        const response = await fetch(requestUrl, {\r\n            method: &apos;GET&apos;,\r\n            headers: {\r\n                &apos;Content-Type&apos;: &apos;application/json&apos;\r\n            }\r\n        });\r\n\r\n        // 检查响应状态码\r\n        if (!response.ok) {\r\n            throw new Error(`请求失败，状态码: ${response.status}`);\r\n        }\r\n\r\n        // 根据响应头解析响应数据格式\r\n        const contentType = response.headers.get(&apos;content-type&apos;);\r\n        if (contentType &amp;&amp; contentType.includes(&apos;application/json&apos;)) {\r\n            return await response.json(); // 解析JSON格式响应\r\n        } else {\r\n            return await response.text(); // 解析文本格式响应\r\n        }\r\n    } catch (error) {\r\n        // 捕获并抛出错误信息\r\n        throw new Error(`请求过程中发生错误: ${error.message}`);\r\n    }\r\n}\r\n\r\n// 使用示例\r\n// fetchImageColorExtraction(&apos;your_token_here&apos;, &apos;https://example.com/image.jpg&apos;, 10)\r\n//     .then(data =&gt; console.log(data))\r\n//     .catch(error =&gt; console.error(error));",
        "Go": "package main\r\n\r\nimport (\r\n\t&quot;encoding/json&quot;\r\n\t&quot;fmt&quot;\r\n\t&quot;io/ioutil&quot;\r\n\t&quot;net/http&quot;\r\n\t&quot;net/url&quot;\r\n)\r\n\r\n// Response 结构体用于解析API响应\r\ntype Response struct {\r\n\tColors []struct {\r\n\t\tCode  string  `json:&quot;code&quot;`\r\n\t\tPer   float64 `json:&quot;per&quot;`\r\n\t} `json:&quot;colors&quot;`\r\n}\r\n\r\nfunc main() {\r\n\t// 必填参数\r\n\ttoken := &quot;your_token_here&quot; // 登录获取用户密钥\r\n\timageURL := &quot;https://example.com/image.jpg&quot; // 需要识别色彩的图片链接\r\n\r\n\t// 可选参数\r\n\t// limit := 10 // 色彩获取数量，支持1-30，不填写默认返回前5个(按照占用百分比排列)\r\n\r\n\t// 构建请求参数\r\n\tparams := url.Values{}\r\n\tparams.Add(&quot;token&quot;, token)\r\n\tparams.Add(&quot;url&quot;, imageURL)\r\n\t// if limit != 0 {\r\n\t// \tparams.Add(&quot;limit&quot;, fmt.Sprintf(&quot;%d&quot;, limit))\r\n\t// }\r\n\r\n\t// 构建请求URL\r\n\trequestURL := &quot;https://yunzhiapi.cn/API/tpsctq.php?&quot; + params.Encode()\r\n\r\n\t// 发送HTTP GET请求\r\n\tresp, err := http.Get(requestURL)\r\n\tif err != nil {\r\n\t\tfmt.Printf(&quot;发送请求时出错: %v\\n&quot;, err)\r\n\t\treturn\r\n\t}\r\n\tdefer resp.Body.Close()\r\n\r\n\t// 检查响应状态码\r\n\tif resp.StatusCode != http.StatusOK {\r\n\t\tfmt.Printf(&quot;请求失败，状态码: %d\\n&quot;, resp.StatusCode)\r\n\t\treturn\r\n\t}\r\n\r\n\t// 读取响应体\r\n\tbody, err := ioutil.ReadAll(resp.Body)\r\n\tif err != nil {\r\n\t\tfmt.Printf(&quot;读取响应体时出错: %v\\n&quot;, err)\r\n\t\treturn\r\n\t}\r\n\r\n\t// 解析JSON响应\r\n\tvar response Response\r\n\terr = json.Unmarshal(body, &amp;response)\r\n\tif err != nil {\r\n\t\tfmt.Printf(&quot;解析JSON响应时出错: %v\\n&quot;, err)\r\n\t\treturn\r\n\t}\r\n\r\n\t// 打印结果\r\n\tfmt.Println(&quot;识别到的色彩及其百分比:&quot;)\r\n\tfor _, color := range response.Colors {\r\n\t\tfmt.Printf(&quot;颜色代码: %s, 百分比: %.2f%%\\n&quot;, color.Code, color.Per)\r\n\t}\r\n}",
        "Shell": "#!/bin/bash\r\n\r\n# 必填参数\r\nTOKEN=&quot;your_token_here&quot;  # 请替换为你的登录获取的用户密钥\r\nURL=&quot;your_image_url_here&quot;  # 请替换为需要识别色彩的图片链接\r\n\r\n# 可选参数，取消注释并设置值以使用\r\n# LIMIT=5  # 色彩获取数量，支持1-30，不填写默认返回前5个\r\n\r\n# 检查必填参数是否为空\r\nif [ -z &quot;$TOKEN&quot; ]; then\r\n  echo &quot;错误: token 参数未设置，请在脚本中设置有效的 token 值。&quot;\r\n  exit 1\r\nfi\r\n\r\nif [ -z &quot;$URL&quot; ]; then\r\n  echo &quot;错误: url 参数未设置，请在脚本中设置有效的图片链接。&quot;\r\n  exit 1\r\nfi\r\n\r\n# 构建请求URL\r\nREQUEST_URL=&quot;https://yunzhiapi.cn/API/tpsctq.php?token=$TOKEN&amp;url=$URL&quot;\r\n\r\n# 如果设置了可选参数 LIMIT，则添加到请求URL\r\nif [ ! -z &quot;$LIMIT&quot; ]; then\r\n  REQUEST_URL=&quot;$REQUEST_URL&amp;limit=$LIMIT&quot;\r\nfi\r\n\r\n# 发送请求并处理响应\r\nresponse=$(curl -s -X GET &quot;$REQUEST_URL&quot;)\r\n\r\n# 检查响应是否为空\r\nif [ -z &quot;$response&quot; ]; then\r\n  echo &quot;错误: 未收到API响应。&quot;\r\n  exit 1\r\nfi\r\n\r\n# 输出响应\r\necho &quot;API响应: $response&quot;",
        "NodeJS": "const axios = require(&apos;axios&apos;);\r\n\r\n/**\r\n * 图片色彩提取API\r\n * @param {string} token - 登录获取用户密钥\r\n * @param {string} url - 需要识别色彩的图片链接\r\n * @param {number} [limit] - 色彩获取数量，支持1-30，不填写默认返回前5个(按照占用百分比排列)\r\n * @returns {Promise} - 返回API响应数据\r\n */\r\nasync function getColorExtraction(token, url, limit) {\r\n    // 检查必填参数\r\n    if (!token) {\r\n        throw new Error(&apos;缺少必填参数: token&apos;);\r\n    }\r\n    if (!url) {\r\n        throw new Error(&apos;缺少必填参数: url&apos;);\r\n    }\r\n\r\n    // 请求参数\r\n    const params = {\r\n        token: token,\r\n        url: url,\r\n        // limit: limit // 可选参数，根据需要取消注释\r\n    };\r\n\r\n    try {\r\n        // 发送请求\r\n        const response = await axios.get(&apos;https://yunzhiapi.cn/API/tpsctq.php&apos;, { params });\r\n        // 返回响应数据\r\n        return response.data;\r\n    } catch (error) {\r\n        // 处理错误\r\n        if (error.response) {\r\n            // 请求已发出，但服务器响应的状态码不在2xx范围内\r\n            throw new Error(`服务器错误: ${error.response.status} ${error.response.statusText}`);\r\n        } else if (error.request) {\r\n            // 请求已发出，但没有收到响应\r\n            throw new Error(&apos;请求超时或服务器未响应&apos;);\r\n        } else {\r\n            // 一些设置请求时发生错误\r\n            throw new Error(`请求配置错误: ${error.message}`);\r\n        }\r\n    }\r\n}\r\n\r\n// 示例调用\r\n// getColorExtraction(&apos;your_token_here&apos;, &apos;https://example.com/image.jpg&apos;)\r\n//     .then(data =&gt; console.log(data))\r\n//     .catch(error =&gt; console.error(error));\r\n// 如果需要使用POST方法，可以参考以下代码\r\n// async function getColorExtraction(token, url, limit) {\r\n//     if (!token) {\r\n//         throw new Error(&apos;缺少必填参数: token&apos;);\r\n//     }\r\n//     if (!url) {\r\n//         throw new Error(&apos;缺少必填参数: url&apos;);\r\n//     }\r\n\r\n//     const data = {\r\n//         token: token,\r\n//         url: url,\r\n//         // limit: limit // 可选参数，根据需要取消注释\r\n//     };\r\n\r\n//     try {\r\n//         const response = await axios.post(&apos;https://yunzhiapi.cn/API/tpsctq.php&apos;, data);\r\n//         return response.data;\r\n//     } catch (error) {\r\n//         if (error.response) {\r\n//             throw new Error(`服务器错误: ${error.response.status} ${error.response.statusText}`);\r\n//         } else if (error.request) {\r\n//             throw new Error(&apos;请求超时或服务器未响应&apos;);\r\n//         } else {\r\n//             throw new Error(`请求配置错误: ${error.message}`);\r\n//         }\r\n//     }\r\n// }",
        "Rust": "use reqwest::Error;\r\nuse serde::{Deserialize, Serialize};\r\n\r\n#[derive(Serialize)]\r\nstruct RequestParams {\r\n    token: String,\r\n    url: String,\r\n    // limit: u8, // 取色数量，支持1-30，不填写默认返回前5个\r\n}\r\n\r\n#[derive(Deserialize, Debug)]\r\nstruct ApiResponse {\r\n    // 根据实际返回格式定义字段\r\n    // 例如：\r\n    // colors: Vec&lt;HexColor&gt;,\r\n    // percentages: Vec&lt;f64&gt;,\r\n}\r\n\r\n// 假设颜色以十六进制格式返回\r\n// #[derive(Deserialize, Debug)]\r\n// struct HexColor(String);\r\n\r\nasync fn fetch_color_percentages(token: &amp;str, url: &amp;str, limit: Option&lt;u8&gt;) -&gt; Result&lt;ApiResponse, Error&gt; {\r\n    let mut params = RequestParams {\r\n        token: token.to_string(),\r\n        url: url.to_string(),\r\n        // limit: 5, // 默认返回前5个颜色\r\n    };\r\n\r\n    // 如果用户提供了limit参数，则设置它\r\n    // if let Some(l) = limit {\r\n    //     params.limit = l;\r\n    // }\r\n\r\n    let client = reqwest::Client::new();\r\n    let response = client\r\n        .post(&quot;https://yunzhiapi.cn/API/tpsctq.php&quot;)\r\n        .form(&amp;params)\r\n        .send()\r\n        .await?;\r\n\r\n    if response.status().is_success() {\r\n        let api_response: ApiResponse = response.json().await?;\r\n        Ok(api_response)\r\n    } else {\r\n        Err(Error::from(format!(\r\n            &quot;请求失败: 状态码 {}, 响应内容 {}&quot;,\r\n            response.status(),\r\n            response.text().await.unwrap_or_else(|_| String::from(&quot;无法读取响应&quot;))\r\n        )))\r\n    }\r\n}\r\n\r\n#[tokio::main]\r\nasync fn main() {\r\n    let token = &quot;your_token_here&quot;; // 替换为实际的token\r\n    let url = &quot;https://example.com/image.jpg&quot;; // 替换为实际的图片链接\r\n    // let limit = Some(10); // 取色数量，支持1-30\r\n\r\n    match fetch_color_percentages(token, url, None).await {\r\n        Ok(response) =&gt; println!(&quot;API响应: {:?}&quot;, response),\r\n        Err(e) =&gt; eprintln!(&quot;错误: {}&quot;, e),\r\n    }\r\n}",
        "C++": "#include &lt;iostream&gt;\r\n#include &lt;string&gt;\r\n#include &lt;curl/curl.h&gt;\r\n#include &lt;json/json.h&gt;\r\n\r\n// 回调函数，用于处理HTTP响应数据\r\nsize_t WriteCallback(void* contents, size_t size, size_t nmemb, void* userp) {\r\n    ((std::string*)userp)-&gt;append((char*)contents, size * nmemb);\r\n    return size * nmemb;\r\n}\r\n\r\nint main() {\r\n    CURL* curl;\r\n    CURLcode res;\r\n    std::string readBuffer;\r\n\r\n    // 初始化curl会话\r\n    curl = curl_easy_init();\r\n    if(curl) {\r\n        // 必填参数\r\n        std::string token = &quot;YOUR_TOKEN_HERE&quot;; // 登录获取用户密钥\r\n        std::string url = &quot;IMAGE_URL_HERE&quot;;     // 需要识别色彩的图片链接\r\n\r\n        // 可选参数\r\n        // std::string limit = &quot;5&quot;; // 色彩获取数量，支持1-30，不填写默认返回前5个\r\n\r\n        // 构建请求URL\r\n        std::string requestUrl = &quot;https://yunzhiapi.cn/API/tpsctq.php?token=&quot; + token + &quot;&amp;url=&quot; + url;\r\n        // 如果需要使用可选参数，取消下面一行的注释\r\n        // requestUrl += &quot;&amp;limit=&quot; + limit;\r\n\r\n        // 设置curl选项\r\n        curl_easy_setopt(curl, CURLOPT_URL, requestUrl.c_str());\r\n        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);\r\n        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;readBuffer);\r\n\r\n        // 执行请求\r\n        res = curl_easy_perform(curl);\r\n\r\n        // 检查请求是否成功\r\n        if(res != CURLE_OK) {\r\n            std::cerr &lt;&lt; &quot;curl_easy_perform() failed: &quot; &lt;&lt; curl_easy_strerror(res) &lt;&lt; std::endl;\r\n        } else {\r\n            // 尝试解析JSON响应\r\n            Json::Value root;\r\n            Json::CharReaderBuilder builder;\r\n            Json::CharReader* reader = builder.newCharReader();\r\n\r\n            std::string errs;\r\n            bool parsingSuccessful = reader-&gt;parse(readBuffer.c_str(), readBuffer.c_str() + readBuffer.size(), &amp;root, &amp;errs);\r\n            delete reader;\r\n\r\n            if (!parsingSuccessful) {\r\n                std::cerr &lt;&lt; &quot;Failed to parse JSON: &quot; &lt;&lt; errs &lt;&lt; std::endl;\r\n            } else {\r\n                // 处理解析后的JSON数据\r\n                std::cout &lt;&lt; &quot;Response: &quot; &lt;&lt; root.toStyledString() &lt;&lt; std::endl;\r\n            }\r\n        }\r\n\r\n        // 清理curl会话\r\n        curl_easy_cleanup(curl);\r\n    } else {\r\n        std::cerr &lt;&lt; &quot;Failed to initialize curl&quot; &lt;&lt; std::endl;\r\n    }\r\n\r\n    return 0;\r\n}",
        "C": "#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n#include &lt;string.h&gt;\r\n#include &lt;curl/curl.h&gt;\r\n\r\n// 回调函数，用于处理HTTP响应数据\r\nsize_t WriteCallback(void *contents, size_t size, size_t nmemb, void *userp) {\r\n    size_t totalSize = size * nmemb;\r\n    printf(&quot;Response: %s\\n&quot;, (char*)contents);\r\n    return totalSize;\r\n}\r\n\r\nint main() {\r\n    CURL *curl;\r\n    CURLcode res;\r\n    char url[256];\r\n    char token[] = &quot;YOUR_TOKEN_HERE&quot;; // 替换为你的token\r\n    char imageUrl[] = &quot;https://example.com/image.jpg&quot;; // 替换为你的图片链接\r\n    // char limit[] = &quot;10&quot;; // 可选参数，取消注释并设置值以使用\r\n\r\n    // 初始化CURL\r\n    curl_global_init(CURL_GLOBAL_DEFAULT);\r\n    curl = curl_easy_init();\r\n    if(curl) {\r\n        // 设置请求URL\r\n        snprintf(url, sizeof(url), &quot;https://yunzhiapi.cn/API/tpsctq.php?token=%s&amp;url=%s&quot;, token, imageUrl);\r\n\r\n        // 如果使用可选参数limit，取消下面两行的注释\r\n        // snprintf(url, sizeof(url), &quot;https://yunzhiapi.cn/API/tpsctq.php?token=%s&amp;url=%s&amp;limit=%s&quot;, token, imageUrl, limit);\r\n\r\n        // 设置CURL选项\r\n        curl_easy_setopt(curl, CURLOPT_URL, url);\r\n        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);\r\n\r\n        // 执行请求\r\n        res = curl_easy_perform(curl);\r\n        if(res != CURLE_OK) {\r\n            fprintf(stderr, &quot;curl_easy_perform() failed: %s\\n&quot;, curl_easy_strerror(res));\r\n        }\r\n\r\n        // 清理\r\n        curl_easy_cleanup(curl);\r\n    } else {\r\n        fprintf(stderr, &quot;Failed to create CURL session.\\n&quot;);\r\n    }\r\n    curl_global_cleanup();\r\n\r\n    return 0;\r\n}"
    }
}